# 오픈스택으로 구현하는 클라우드 컴퓨팅

## 3. 오픈스택 서비스 사용하기

### 3.1 계정 정보 확인

+ 계정 정보를 확인하는 명령어

  ```shell
  [root@controller ~]# ls
  anaconda-ks.cfg  keystonerc_admin  openstack.orig  openstack.txt
  [root@controller ~]# cat keystonerc_admin 
  unset OS_SERVICE_TOKEN
      export OS_USERNAME=admin
      export OS_PASSWORD='password'
      export OS_REGION_NAME=RegionOne
      export OS_AUTH_URL=http://미리설정한 오픈스택 대시보드 주소:5000/v3
      export PS1='[\u@\h \W(keystone_admin)]\$ '
  ```

  여기서 `export`는 로컬변수를 글로벌 변수로 변환해주는 명령어이다.
  
  

### 3.2 Horizon 접속

>  http://오픈스택 대시보드 주소/dashboard 접속하기



### 3. 3 관리 메뉴

#### 3.3.1 Compute 메뉴

+ 호스트 집합11

  ​	사용자 모드 /  호스트들을 관리하기 위한 목적

+ 인스턴스

  ​	관리 목적의 메뉴이기 때문에 인스터스를 생성할 수 없다.

+ 이미지

  ​	Glance 서비스

+ Flavor

  ​	AWS에서의 인스턴스 타입이 오픈스택에서는 Flavor라 불린다.

  ​	flavor 에서 디스크를 올릴 때 2개까지 assign 가능하다.

  ​	인스턴스를 더 작은 것을 올리길 원한다면 서비스할 환경에서 좀더 다양한 flaver가 필요할 경우 "관리자" 만 생성이 가능하다. 

#### 3.3.2 볼륨 메뉴

+ 볼륨

  ​	리소스 풀로 관리가 가능

#### 3.3.3 네트워크 메뉴

+ 네트워크 디바이스 가상 라우터가 필요해서 만들 수 있다.
+ Netron 서비스

#### 3.3.4  시스템 메뉴

+ 시스템 정보

  ​	각 서비스 마다 버전 업 가능

  ​	각각의 버전마다 엔드포인드 `(Admin, Internal, Public)` 가 다르다. (여기에 버전이 들어감을 알 수 있다.)

  	Admin http://0.0.0.0:8776/v1/4a4d959bd538498fb9428f6fae64cbf7
  	여기보면 포트가 8776 이고 각각 서비스들마다 포트가 다름을 확인할 수 있다.
  

​	

### 3.4 OpenStack 용어정리	

> 프로젝트 - cloud 사용자 group에 Quota적용
>
> Tenant - cloud 사용자그룹(project)
>
> Flavor - VM profile
>
> Image - Instance에연결될OS 설치이미지
>
> Instance - VM
>
> Key pair
>
> 	- DER/PEM/X.509로 인코딩 된 넷스케이프 인증서
> 	- 사용자가VM instance에접속시사용
> - 목적은 ssh에서 키인증 기반으로 관리하기 위함. `keyzen` 이용. default는 password 기반.



### 3.5 Horizon으로 사용 및 관리하기 (관리자 모드에서 작업)

​	1) Project 생성

​			+ 인증 메뉴 -> 프로젝트 메뉴 -> 프로젝트 생성 -> "pro1" 

​	2) 사용자 생성

​			+ IT 관계자

​			+ 인증메뉴 -> 사용자 메뉴 -> 사용자 생성 -> "stack1", "mgr1"

​	3) Flavor 생성

​			+  Flavor 생성 -> "a.tiny", "a.nano" -> Flavor 접근 권한 설정해주기 (pro1 프로젝트로)

​	4) Network 생성

​	5) Router 생성

​	6) Security Group 생성

​	7) Key pair 생성

​	8) Floating IP 생성 

​			+ 공인 IP 생성 - Extenal 접근 (사설IP - Fixed IP -internal 접근)

​			+ EC2를 reboot 할시 공인 IP는 그대로이나 stop -> start 명령시 공인IP는 바뀐다.

​			+ 변경을 하지 않기 위해 AWS의 경우 엘라스틱 IP (EIP_다이나믹 공인IP)로 요청해 static으로 IP			가 변경되지 않는다.

​	9) Image 생성

​	10) Instance 생성

​	11) Volume / Snapshot 생성

​	12) Object storage 사용



### 3.6 **가상 네트워크 지정** 그림으로 Mapping

![Mapping](https://github.com/SeolRoh/TIL/blob/master/etc/archetecture_mapping.jpg)