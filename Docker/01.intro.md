# Docker를 활용한 컨테이너 개발

## 1. Intro

### 도커란? > 컨테이너형 가상화 기술을 구현하기 위한 애플리케이션과 이 애플리케이션을 조작하기 위한 명령행 도구라고 한다. 

즉, 이미지를 생성할 수 있고 이 이미지를 바탕으로 여러개의 컨테이너를 생성할 수 있으며, 환경 설정도 가능하다.

#### 도커의 장점으로는 

 1) 기존의 가상화 소프트웨어 보다 더 가볍게 동작한다. 그렇기 때문에 테스트 환경 뿐만 아니라 운영환경에서도 컨테이너 사용이 가능하다.

 2) 이식성이 뛰어나다. 도커환경에 있는 컨테이너를 다른 서버에 있는 도커 환경에 배포 시, 또 다른 서버의 도커 환경 내 컨테이너를 로컬로 가져올 수 있다.

 =>  이 말은, 개발 환경과 운영환경을 거의 동등하게 사용가능하다.



#### 도커가 적합하지 않는 경우,

 컨테이너는 OS의 동작을 완전하게 실현시키지 못해서, 리눅스 계열의 OS 동작이 필요한 가상환경을 구축해야 한다면 VMware , VirtualBox를 이용하는게 낫다. FreeBSD 같은 비리눅스 환경이 필요하다면 도커가 맞지 않다. <u>***그저 도커는 애플리케이션을 배포하는 목적에 특화됐다.***</u>



### 1.1 도커 이미지

> 도커 컨테이너를 구성하는 파일 시스템과 실행할 애플리케이션 설정을 하나로 합친 것으로, 컨테이너를 생성하는 템플릿 역할을 한다.



### 1.2 도커 컨테이너

> 도커 이미지를 기반으로 생성되며, 파일 시스템과 애플리케이션이 구체화되어 실행되는 형태.



### 1.3 Dokerfile 생성 및 내부 설정

 + FROM 인스트럭션

    + 도커 이미지가 될 베이스 이미지를 지정.

    + Dockerfile로 이미지를 빌드할때 먼저 FROM 인스트럭션에 지정한 이미지로 다운.

      ```
      FROM node:alpine
      ```

 + RUN 인스트럭션

    + 도커 이미지 실행시에 컨테이너 안에서 실행할 명령을 정의한다.

 + COPY 인스트럭션

    + 복사, 도커가 실행 중인 호스트 머신의 파일, 디렉토리를 도커 내부로 복제한다.

    + 리눅스에서 cv

      ```
      COPY ./package.json ./package.json
      COPY ./index.js ./index.js
      ```

 + CMD 인스트럭션

    + 도커 컨테이너 실행 시 컨테이너 안에서 실행할 프로세스 지정

      ```
      CMD ["npm", "start"]
      ```

      

   -----------------------------------------------------------------------------------------------

 + LABEL 인스트럭션

    + 이미지 만든 사람의 이름 과같은 정보를 작성 할 수있다.

 + ENV 인스트럭션

    + 도커 컨테이너 안에서 사용 할 환경변수 지정 및 추가
    + linux 에서는 export 사용

 + ARG 인스트럭션

    + argument 인자 값 
    + 이미지 빌드 시에만,  정보를 함께 삽입하기 위해 사용.

   ----------------------------

+ ENTRYPOINT 인스트럭션

  + 컨테이너의명령 실행 방식 조정 가능
  + 사용자로부터 보여줄 파일, 생략가능 명령들을 처리하기 위해 사용
  + 사전에 지정할수 있는 것들을 설정